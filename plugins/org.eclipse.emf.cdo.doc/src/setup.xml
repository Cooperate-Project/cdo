<?xml version="1.0" encoding="UTF-8" ?>
<project name="setup-dita" default="all" basedir=".">

	<property file="setup.properties" />
	<property file="${user.home}/dita/build.properties" />

	<property name="project.root" location="${basedir}/.." />
	<property name="dita.root" location="${project.root}/${dita.path}" />
	<property name="xsl.root" location="${project.root}/${xsl.overrides.path}" />

	<target name="all">
		<property name="dita.external" location="${dita.home}" />
		<echo message="External DITA distribution --> ${dita.external}" />
		<echo message="Local DITA copy            --> ${dita.root}" />
		<echo message="Local stylesheet overrides --> ${xsl.root}" />

		<!-- Clean the local DITA copy -->
		<delete dir="${dita.root}" includeemptydirs="true" failonerror="false" />

		<!-- Copy external DITA distribution -->
		<copy todir="${dita.root}" overwrite="true" verbose="true" includeemptydirs="false">
			<fileset dir="${dita.external}">
				<include name="css/**/*" />
				<include name="dtd/**/*" />
				<include name="lib/**/*" />
				<include name="css/**/*" />
				<include name="resource/**/*" />
				<include name="schema/**/*" />
				<include name="xsl/**/*" />
				<include name="*" />
			</fileset>
		</copy>

		<!-- Overwrite with local stylesheets -->
		<copy todir="${dita.root}/xsl" overwrite="true" verbose="true" includeemptydirs="false">
			<fileset dir="${xsl.root}" includes="**/*" />
		</copy>
	</target>

</project>
